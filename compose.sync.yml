version: '3.8'

services:
  spotify-mp3-sync:
    build:
      context: .
    user: 1000:1000
    networks:
      - caddy_network
    env_file:
      - path: ./config/.env
    environment:
      - DOTENV=true  # Ensures the .env is recognized
    volumes:
      - ./py:/app
      - ./config/spotdl.config.json:/config/.spotdl/config.json
      - /home/debian/storage/music/audio/:/app/music
      - ./config/.env:/app/.env
      - ./config/spotify_playlists.json:/app/spotify_playlists.json
    command: python main.py
networks:
  caddy_network:
    external: true
